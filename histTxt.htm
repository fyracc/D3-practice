<html>

<head>
    <!-- 修改网页编码 -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>JavaScript直方图带文字
    </title>
</head>

<body>
    <svg id="svg01" width=800 height=600>
        <!-- <rect x=20 y=20 width=100 height=300 fill="blue">
            </rect> -->
        <!-- 文本从左下角开始 -->
        <!-- <text x="0" y="20" fill="red">Hello</text> -->
    </svg>
    <script>
        var w = window.innerWidth
            || document.documentElement.clientWidth
            || document.body.clientWidth;

        var h = window.innerHeight
            || document.documentElement.clientHeight
            || document.body.clientHeight;
        w = w * 0.98;
        h = h * 0.98;
        var svg = document.getElementById("svg01");
        svg.setAttribute("width", w);
        svg.setAttribute("height", h);
        var rec = new Array();
        var txt = new Array();
        for (var i = 0; i < 10; i++) {
            rec[i] = document.createElement("rect");    // 创建SVG的矩形rect及txt
            txt[i] = document.createElement("text");
            svg.appendChild(rec[i]);                    // 添加到SVG的子节点
            svg.appendChild(txt[i]);
            var rec_h = Math.floor(Math.random() * 255);            // 随机取值
            rec[i].outerHTML = "<rect x=" + (i * w / 10) + " y=" + (600 - rec_h) + " width=" + (w / 10 - 5) + " height=" + rec_h + " fill='rgb(" + rec_h + ",0,0)'>";
            txt[i].outerHTML="<text x="+(i * w / 10+((w/10-5)/2))+" y="+(600 - rec_h) +" fill='bule'>"+rec_h+"</text>"    
        }

    </script>
</body>

</html>